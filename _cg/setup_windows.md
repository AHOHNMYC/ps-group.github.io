---
title: 'Установка окружения для Windows'
subtitle: 'Краткая инструкция по установке Visual Studio, а также других инструментов и библиотек'
draft: true
---

## Установка Visual Studio 2017

Microsoft предоставляет несколько редакций Visual Studio: большинство из них платные, но мы будем использовать бесплатную редакцию - Community Edition.

>Редакция Community Edition предназначена для инди-разработчиков, обучающихся и для разработчиков OpenSource проектов. Для коммерческой разработки в команде потребуются другие редакции либо среда MonoDevelop.

Загрузите онлайн-инсталлятор Visual Studio 2017 Community Edition: [visualstudio.com/downloads](https://www.visualstudio.com/downloads/)

После загрузки запустите (на медленных машинах запуск может быть долгим).
В установщике выберите один компонент - “Разработка классических приложений на C++”:

![Скриншот](img/setup/vs2017ce_cpp.png)

На вкладке языковых пакетов уберите пакет “Русский”, выберите “Английский” - с англоязычным интерфейсом гораздо легче найти решение какой-либо проблемы в Интернете:

![Скриншот](img/setup/vs2017ce_en.png)

Запустите установку Visual Studio. Процесс установки может занять 1-2 часа.

После установки Visual Studio вы можете установить плагины, загрузив их с сайта visualstudio и запустив:

* [ClangFormat](https://marketplace.visualstudio.com/items?itemName=LLVMExtensions.ClangFormat)
* [C++ Debugger Visualizers for VS2017](https://marketplace.visualstudio.com/items?itemName=ArkadyShapkin.CDebuggerVisualizersforVS2017)

## Установка Git

Git - это OpenSource система контроля версий, представленная пакетом инструментов командной строки.
Скачайте и установите Git для Windows: https://git-scm.com/download/win

Для более комфортной работы с git вы можете установить какой-нибудь графический клиент для Git:

* Source Tree (https://www.sourcetreeapp.com/)
* Tortoise Git (https://tortoisegit.org/)
* клиент для работы с Github (https://desktop.github.com/).

## Установка CMake

Для сборки примеров потребуется CMake. Свои работы также рекомендуется делать с помощью CMake.

- Скачайте Cmake [с официального сайта](https://cmake.org/download/)
- При установке не забудьте поменять опцию, чтобы путь к CMake был добавлен в переменную [PATH](http://superuser.com/questions/284342/what-are-path-and-other-environment-variables-and-how-can-i-set-or-use-them)

![Скриншот](img/cmake_add_to_path.png)

>Переменные окружения, такие как [PATH](http://superuser.com/questions/284342/what-are-path-and-other-environment-variables-and-how-can-i-set-or-use-them), передаются приложению при старте. Если вы поменяли переменную PATH, изменения вступят в силу после перезапуска программ.

## Установка и использование vcpkg

> Источник: [blogs.msdn.microsoft.com/vcblog/2016/09/19/vcpkg-a-tool-to-acquire-and-build-c-open-source-libraries-on-windows](https://blogs.msdn.microsoft.com/vcblog/2016/09/19/vcpkg-a-tool-to-acquire-and-build-c-open-source-libraries-on-windows/)

Пакетный менеджер vcpkg распространяется в исходниках и собирается на машине разработчика. Для сборки потребуется установленная Visual Studio с инструментами C++ разработчика.

Порядок установки описан в консольных командах:

```
:: Клонируем репозиторий vcpkg (ветка master)
git clone https://github.com/Microsoft/vcpkg

:: Переходим в каталог клона репозитория
cd vcpkg

:: Выполняем скрипт для сборки vcpkg
powershell -exec bypass scripts\bootstrap.ps1
:: Теперь в корне репозитория лежит vcpkg.exe, который можно вызывать
::  из каталога либо добавить в переменную окружения PATH.
```

После того, как вы получили `vcpkg.exe`, вы можете устанавливать пакеты командой `install`. Пример:

```
vcpkg install sdl2:x86-windows sdl2-image:x86-windows
```

В команде, представленной выше, имена пакетов перечисляются по порядку, а в качестве суффикса используется так называемый "триплет": `имя_пакета:триплет`.

- Имя пакета задаёт одно из множества имён доступных библиотек, полный список есть в [блоге ]
- Триплет задаёт архитектуру и режим сборки

Доступные триплеты:

```
x64-windows-static
x64-windows
x86-windows-static
x86-windows
arm-uwp
x64-uwp
x86-uwp
```

Для данного курса рекомендуются триплеты `x86-windows` для сборки 32-битной версии программы и `x64-windows` для сборки 64-битной версии. Суффикс static означает, что библиотеки будут собираться статически и вам не потребуется распространять DLL. При использовании триплета без суффикса придётся заботиться о наличии DLL при выполнении программы.

Вместо явного указания триплета для каждой библиотеки можно разом указать триплет для всех:

```
vcpkg --triplet x86-windows-static sdl2 sdl2-image
```

Последняя, но крайне важная деталь: включите автоматическую интеграцию пакетов vcpkg во все проекты Visual C++:

```
:: Включаем интеграцию во все проекты Visual C++ в системе.
:: При первом запуске нужны права администратора.
vcpkg integrate install

:: Удаляем интеграцию - если она вам помешала.
vcpkg integrate remove
```

<!--

## Установка пакетов для курса

Мы используем следующие библиотеки:

- sdl2, sdl2-image, sdl2-mixer, sdl2-ttf в целях абстрагирования от операционной системы для создания окон, растеризации текстовых надписей, загрузки изображений с диска, загрузки и проигрывания звуковых файлов
- glbinding для прозрачного подключения нужной версии API OpenGL без необходимости вручную работать с механизмом расширений OpenGL
- assimp3 для загрузки 3D моделей из множества форматов файлов
- anax для построения архитектуры программы на принципах Component-Entity-System
- bullet3 для расчёта столкновений в 3D пространстве
- glm для работы с линейной алгеброй в рамках задач 3D графики
- nlohmann-json для загрузки JSON
- tinyxml2 для загрузки XML

Команда для установки 32-битных версий библиотек из исходников может выполняться долго, т.к. сборка занимает длительное время:

```
vcpkg --triplet x86-windows-static sdl2 sdl2-image sdl2-mixer sdl2-ttf glbinding assimp anax bullet3 glm nlohmann-json tinyxml2
```

## Настройка gitignore для своих проектов

В Visual Studio управление настройками сборки производится в графическом режиме в окне настроек проекта, хотя сами настройки сохраняются в XML определённой схемы в файле `*.vcxproj`. Виртуальные папки (фильтры), по которым разложены файлы проекта, сохраняются в файле `*.vcxproj.filters`. Настройки проекта из раздела Debugging, а также некоторые неявные пользовательские настройки сохраняются в `*.vcxproj.user`. Есть общепринятые правила:

- Файлы `*.vcxproj` необходимы и достаточны для сборки проекта, их следует держать под контролем версий Git, а настройки проекта изменять аккуратно
- Файлы `*.vcxproj.filters` не нужны для сборки, но хранят фильтры файлов, их тоже следует держать под контролем версий Git
- Файлы `*.vcxproj.user` хранят специфичные для компьютера настройки, их не следует держать в Git
- Файлы `*.sln` хранят списки проектов и информацию о сборке всего списка проектов в разных конфигурациях. Их следует держать в Git.

Вы можете взять готовый шаблон файла `.gitignore` из репозитория [github.com/github/gitignore](https://github.com/github/gitignore/blob/master/VisualStudio.gitignore). После добавления файла `.gitignore` в корень своего репозитория достаточно сделать commit, добавляющий этот файл.

-->
