---
title: Простые программы на языке Kotlin
subtitle: В статье мы напишем пару простых программ на языке Kotlin, посмотрим как происходит его компиляция
preview: img/kotlin_basics/icon.png
---

**Что же такое Kotlin?**  
Это новый язык программирвоания для платформы Java. Kotlin - прагматичный, лаконичный и безопасный язык программирования, совместимый с Java. Его можно использовать практически везде, где применяется Java: для разработки серверных приложений, приложений для Android и т.д. Kotlin прекрасно работает со всеми существующими библиотеками на Java.

Также Kotlin может компилироваться в JavaScript, прочитать про это можно [здесь](https://kotlinlang.org/docs/reference/js-overview.html)

С недавнего времени Kotlin может компилироваться в нативный код и работать без JVM на платформах:

* iOS (arm32, arm64, emulator x86_64)
* MacOS (x86_64)
* Android (arm32, arm64)
* Windows (mingw x86_64)
* Linux (x86_64, arm32, MIPS, MIPS little endian)
* WebAssembly (wasm32)

Подробнее про [Kotlin Native](https://kotlinlang.org/docs/reference/native-overview.html)

## Философия Kotlin

**Прагматичность:** Kotlin является практичным языком, предназначенным для решения реальных задач. Его характеристики выбирались исходя из задач, которые чаще всего приходится решать разработчикам. Плагин для IntellIj IDEA с самого начала разрабатывался параллельно с языком, по-этому поддержка языка в IDE не является чем-то малозначительным, разработчикам доступно большое количество рефакторингов.

**Лаконичность:** известно, что разработчики тратят больше времени на прочтение существующего кода, чем на создание нового. Создатели Kotlin старались организовать синтаксис так, чтобы он нес определенный смысл и был минимален.

**Безопасность:** Kotlin пытается избавить программу от исключений **NullPointerException**. Система типов в Kotlin отслеживает значения, которые могу или не могут иметь значение null

```kotlin
val s: String? = null // может содержать значение null
val s: String = ""    // не может содержать значение null
```

**Совместимость:** Kotlin может компилироваться в одом проекте с Java кодом. Такая возможность позволила разработчикам начать писать существующие Java-проекты на Kotlin и использовать Java-библиотеки. Также есть возможность вызывать Kotlin-код из Java кода.

## Компиляция
Исходный код на языке Kotlin обычно хранится в файлах с расширением .kt. Компилятор Kotlin анализирует исходный код и генерирует файлы .class так же, как компилятор Java. Затем сгенерированные файлы .class упаковываюься и выполняются с использованием процедуры, стандартной для данного типа приложения.

Подробно про компиляцию Kotlin можно почитать в [этой статье](https://habr.com/ru/company/inforion/blog/330060/).

![Компиляция](https://hsto.org/web/df0/1eb/758/df01eb758bec4716bf6c0c017d8e5faf.png)

## HelloWorld
Сравним HelloWorld на языке Java и Kotlin. Уже здесь можно заметить, что Kotlin не такой многословный  

```java
/* Java */
class HelloWorld {
    public static void main(String[] args) {
        System.out.println("Hello World!");
    }
}
```

```kotlin
/* Kotlin */
fun main() {
    println("Hello World")
}
```

Изучить язык на примерах можно в [официальном наборе примеров с пояснениями](https://play.kotlinlang.org/byExample/01_introduction/01_Hello%20world)

## Основные элементы

### Функции

Объявление функций начинается с ключевого слова **fun**

```kotlin
fun max(a: Int, b: Int): Int {
    return if (a > b) a else b
}
```

Так-как в Kotlin оператор **if** - это выражение, а не инструкция, то им можно заменить тело функции. 

```kotlin
fun max(a: Int, b: Int): Int = if (a > b) a else b
```

Если тело функции заключено в фигурные скобки, говорят, что такая функция имеет **тело-блок (block body)**. Фукнция возвращаяющая выражение напрямую, имеет **тело-выражение (expression body)**.

Функцию **max** можно упростить ещё больше, опустив тип возвращаемого значения.

```kotlin
fun max(a: Int, b: Int) = if (a > b) a else b
```

### Переменные

В Kotlin объявление переменной начинается с ключевого слова, а тип можно указывать (или не указывать) после имени переменной. Объявим две переменные:

```kotlin
val question = "The Ultimate Question of Life, the Universe, and Everything"
val answer = 42
```

В этом объявлении типы отсутствуют, но их можно добавить:

```kotlin
val answer: Int = 42
```

Если использовать константу с плавающей точкой, то переменная получит тип Double:

```kotlin
val yearsToCompute = 7.5e6
```

Есть два ключевых слова для объявления переменной:

* **val** (*от value*) - неизменяемая ссылка. Переменной, объявленной с ключевым словом val, нельзя присвоить значение после инициализации. Такие переменные соответствуют финальным переменным в Java.
* **var** (*от variable*) - изменяема ссылка. Значение такой переменной можно изменить. Такое объявление соответствует обычной (не финальной) переменной в Java.

### Простое формирование строк: шаблоны

Вот как можно поприветствовать людей по именам на Kotlin:

```kotlin
fun main(args: Array<String>) {
    val name = if (args.size > 0) args[0] else "Kotlin"
    println("Hello, $name!")
}
```

Этот пример демонстрирует применение особенности синтаксиса Kotlin, которая называется **строковые шаблоны (string templates)**

## Классы и свойства

Основные понятия языка Kotlin будут вам знакомы, если вы знакомы с парадигмой **ООП**, но вы обнаружите, что множество типичных задач можно решить меньшим объемом кода.

### Объявление класса

Для начала рассмотри простой [JavaBean](http://java-online.ru/jsp-javabean.xhtml) класс Student:

```java
/* Java */
public class Student {
    private final String name;

    public Student(String name) {
        this.name = name;
    }

    public String getName() {
        return name;
    }
}
```

```kotlin
/* Kotlin */
class Student(val name: String)
```

Классы этого типа называют **объектами-значениями (value objects)**, и многие языки предоставляют краткий синтаксис для их объявления.

Свойство в классе объявляется так же, как переменная: с помощью ключевых слов **val** и **var**

```kotlin
class Student(
    val name: String, // Неизменяемое свойство: для него будут созданы поле и простой метод чтения
    var groupId: Int  // Изменяемое свойство: поле, методы чтения и записи
)
```

## Представление и обработка выбора

### Объявление классов перечислений

Создадим перечисление цветов

```kotlin
enum class Color {
    RED, ORANGE, YELLOW, GREEN, BLUE, INDIGO, VIOLET
}
```

Точно как в Java, перечисления - это не просто списки значений: в классах перечислений можно объявить свойства и методы:

```kotlin
enum class Color(
    val r: Int, val g: Int, val b: Int
) {
    RED(255, 0, 0),
    ORANGE(255, 165, 0),
    YELLOW(255, 255, 0),
    GREEN(0, 255, 0),
    BLUE(0, 0, 255),
    INDIGO(75, 0, 130),
    VIOLET(238, 130, 238);

    fun rgb() = (r * 256 + g) * 256 + b
}
```
```kotlin
>>> println(Color.RED.rgb())
255
```

### Использование оператора **when**

Аналогом оператора **switch** из Java, является оператор **when**

Подобно **if**, оператор **when** - это выражение, возвращающее значение, поэтому можно написать функцию с телом-выражением, которая напрямую возвращаяет выражение when:

```kotlin
fun getMnemonic(color: Color) = when (color) {
    Color.RED -> "Каждый"
    Color.ORANGE -> "Охотник"
    Color.YELLOW -> "Желает"
    Color.GREEN -> "Знать"
    Color.BLUE -> "Где"
    Color.INDIGO -> "Сидит"
    Color.VIOLET -> "Фазан"
}
```

```kotlin
>>> println(getMnemonic(Color.ORANGE))
Охотник
```

## Полезные материалы
[Официальный сайт Kotlin](https://kotlinlang.org/)  
[Набор примеров на Kotlin с пояснениями](https://play.kotlinlang.org/byExample/01_introduction/01_Hello%20world)  
[Компилятор онлайн](https://try.kotlinlang.org/#/Examples/Hello,%20world!/Simplest%20version/Simplest%20version.kt)
